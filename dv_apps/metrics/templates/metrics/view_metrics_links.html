{% extends "base.html" %}
{% block title %}Metrics links{% endblock %}

{% block main_content %}


<div class="panel panel-default">
  <div class="panel-heading">Links</div>
  <div class="panel-body">


      <div class="row">

          <div class="col-xs-12 col-sm-6">


   {% if DEBUG %}
   <div class="panel panel-default">
     <div class="panel-heading">
       <h3 class="panel-title">admin</h3>
     </div>
     <div class="panel-body">
       <ul>
           <li><a href="{% url 'admin:index' %}">{% url 'admin:index' %}</a></li>
       </ul>
       </div>
   </div>
    {% endif %}

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Metrics API/Swagger</h3>
      </div>
      <div class="panel-body">
          <p>Dataverse Metrics API description via swagger</p>
          <ul>
              <li><a href="/static/swagger-ui/index.html?url={% url 'view_dynamic_swagger_spec' %}">swagger UI</a></li>
              <li><a href="{% url 'view_dynamic_swagger_spec' %}">API Specs via swagger YML</a></li>
          </ul>
        </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Dataverses</h3>
      </div>
      <div class="panel-body">
          <p>Dataverse List in Excel</p>
          <ul>
              <li><a href="{% url 'view_dataverse_list_default' %}">List of published Dataverses (.xlsx)</a></li>
          </ul>
          <p>Dataverse hierarchies</p>
          <ul>
              <li><a href="{% url 'get_dataverse_tree_json' %}">JSON Dataverses of depth 2 or greater</a></li>
              <li><a href="{% url 'get_dataverse_tree_json' %}?pretty">JSON Dataverses of depth 2 or greater (pretty)</li>

              <li><a href="{% url 'get_dataverse_full_tree_json' %}">Full Dataverse hierarchy</a></li>
              <li><a href="{% url 'get_dataverse_full_tree_json' %}?pretty">Full Dataverse hierarchy (pretty)</a></li>
          </ul>
        </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Installations/Map</h3>
      </div>
      <div class="panel-body">
          <p>Views of dataverse installations.</p>

          <ul>

              <li><a href="{% url 'view_installations_json' %}">Installations as JSON</a></li>
              <li><a href="{% url 'view_installations_json_pretty' %}">Installations as JSON (pretty)</a><br />&nbsp;</li>

              <li><a href="{% url 'view_map' %}">Map</a></li>
              <li><b style="color:#b94617;">dataverse.org</b>: <a href="{% url 'view_map_dataverse_org' %}?iframe=true">Map in iframe</a></li>
              <li><b style="color:#b94617;">dataverse.org</b>: <a href="{% url 'view_homepage_counts_dataverse_org' %}">Counts of installations, dataverses, datasets, downloads</a>

          </ul>
      </div>
    </div>


    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Visualizations last 12 months</h3>
      </div>
      <div class="panel-body">
          <p>Charts used for metrics on dataverse.org</p>

        <ul>
            <li><a href="{% url 'view_public_visualizations_last12' %}">Last 12 months</a></li>
            <li><b style="color:#b94617;">dataverse.org</b>: <a href="{% url 'view_public_visualizations_last12_dataverse_org' %}?iframe=true">Last 12 months - iframe</a></li>
        </ul>
        </div>
    </div>

    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">Invoke 404 and 500 errors</h3>
      </div>
      <div class="panel-body">
          <p>Test links for viewing error pages</p>
        <ul>
            <li><a href="{% url 'view_test_404' %}">Show 404 error</a></li>
            <li><a href="{% url 'view_test_500' %}">Show 500 error</a></li>
        </ul>
        </div>
    </div>

</div><!-- end col -->

        <!-- start 2nd col -->
        <div class="col-xs-12 col-sm-6">

            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Quality Control/Maintenance</h3>
              </div>
              <div class="panel-body">
                <ul>
                    <li><a href="{% url 'view_qc_dashboard' %}">Dashboard (takes a minute then caches)</a><br />&nbsp;</li>
                    <li><a href="{% url 'view_all_file_extension_counts' %}">Files counts based on file extensions</a><br /> (e.g. How many .tab files?)</li>
                    <li><a href="{% url 'view_files_extensions_with_unknown_content_types' %}">Extensions of Files classified as unknown</a><br />&nbsp;</li>

                    <li><b style="color:#b94617;">for rough AWS estimates</b>: <a href="{% url 'view_monthly_downloads' %}">Bytes Downloaded</a></li>
                </ul>
                </div>
            </div>


            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Dataverse/Dataset JSON</h3>
              </div>
              <div class="panel-body">
                  <p>Experiments for faster retrieval/caching of Dataverse/Dataset JSON.
                  Only available for published Dataverses, Datasets.</p>
                  <p><b>dataverse json</b></p>
                  <ul>
                      <li><a href="{% url 'view_single_dataverse_by_id' 1 %}?">Dataverse by id. Example: id=1 </a></li>
                      <li><a href="{% url 'view_single_dataverse_by_id' 1 %}?pretty=true">Dataverse by id. Example: id=1 (pretty) </a><br />&nbsp;</li>

                      <li><a href="{% url 'view_single_dataverse_by_alias' 'root' %}">Dataverse by Alias. Example: alias=root</a></li>
                      <li><a href="{% url 'view_single_dataverse_by_alias' 'root' %}?pretty=true">Dataverse by Alias. Example: alias=root (pretty)</a></li>
                  </ul>

                  <p><b>dataset json</b></p>
                  <ul>
                    <li><a href="{% url 'view_dataset_by_id_api' 53121 %}">Dataset by id. Example: id=53121 </a></li>
                    <li><a href="{% url 'view_dataset_by_id_api' 53121 %}?pretty">Dataset by id. Example: id=53121 (pretty) </a><br />&nbsp;</li>

                    <li><a href="{% url 'view_dataset_by_persistent_id_api' %}?persistentId=doi:10.7910/DVN/26935">Dataset by persistentId using "doi:10.7910/DVN/26935" </a></li>

                    <li><a href="{% url 'view_dataset_by_persistent_id_api' %}?persistentId=doi:10.7910/DVN/26935&pretty">Dataset by persistentId using "doi:10.7910/DVN/26935" (pretty) </a></li>


                </ul>

                  <p><b>datasets</b> </p>
                  <p>Proof of concept for metadata retrieval with fewer queries. to add: Terms, Versions.  Versions would be a single query each--a single JSON doc each
                  <ul>
                      <li>by id using "53121":<br />
                           <a href="{% url 'view_single_dataset' 53121 %}">{% url 'view_single_dataset' 53121 %}</a></li>
                      <li>by persistentId using "doi:10.7910/DVN/26935":<br />
                           <a href="{% url 'view_dataset_by_persistent_id' %}?persistentId=doi:10.7910/DVN/26935">{% url 'view_dataset_by_persistent_id' %}?persistentId=doi:10.7910/DVN/26935</a></li>
                      <li>by dataset version id using "79678": <br />
                          <a href="{% url 'view_dataset_by_version' 79678 %}">{% url 'view_dataset_by_version' 79678 %}</a></li>
                      <br />comparable on public: <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/26935">https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/26935</a>
                  </ul>
                  <p><b>dataset differences</b></p>
                  <p>Beginning of proof of concept for comparing two datasets (2 JSON docs).  avoiding current 100s of queries in prod.</p>
                    <ul>
                        <li>diff using dataset id 53121 : <a href="{% url 'view_differences' 53121 %}">{% url 'view_differences' 53121 %}</a></li>
                    </ul>
                  <p>beginning of page to try to explain using JSON + simple templating</p>
                  <ul>
                      <li>composable: <a href="{% url 'view_side_by_side1' 53121 %}">{% url 'view_side_by_side1' 53121 %}</a></li>
                  </ul>
                </div>
            </div>

            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Datafile misc (published files only)</h3>
              </div>
              <div class="panel-body">
                <ul>
                    <li><a href="{% url 'view_file_content_types' %}">Content type list in JSON</a></li>
                    <li><a href="{% url 'view_file_content_types' %}?pretty">Content type list in JSON (pretty)</a></li>
                    <li><a href="{% url 'view_file_content_types' %}?as_excel">Content type list in Excel (.xlsx)</a><br />&nbsp; </li>

                    <li><a href="{% url 'view_file_list_by_type' %}">Files filtered by content type JSON</a>
                    <br />e.g. "?contenttype=text/tab-separated-values"</li>
                    <li><a href="{% url 'view_file_list_by_type' %}?pretty">Files filtered by content type JSON (pretty)</a></li>
                    <li><a href="{% url 'view_file_list_by_type' %}?as_excel">Files filtered by content type in Excel (.xlsx)</a></li>

                </ul>
              </div>
            </div>

            <div class="panel panel-default">
              <div class="panel-heading">
                <h3 class="panel-title">Datafile quick looks</h3>
              </div>
              <div class="panel-body">
                <ul>
                    <li><a href="{% url 'view_table_preview_json' 1480151 %}">Tabular Rows JSON for file id 1480151: {% url 'view_table_preview_json' 1480151 %}</a></li>

                    <li><a href="{% url 'view_table_preview_html' 1480151 %}">Tabular Preview for file id 1480151: {% url 'view_table_preview_html' 1480151 %}</a></li>


                    <li><a href="javascript:var myParam = location.search.split('fileId=')[1];window.location = 'https://services.dataverse.harvard.edu/miniverse/datafile/table-preview-html/' + myParam;">scriptlet for preview tabular rows</a></li>

                    <li><a href="javascript:var myParam = location.search.split('persistentId=')[1];window.location = 'https://services.dataverse.harvard.edu/miniverse/dvobjects/api/v1/datasets/by-persistent-id?persistentId=' + myParam;">scriptlet for html from dataset JSON</a></li>
                </ul>
            </div>
        </div><!-- end 2nd col -->
        </div><!-- end row -->
    </div>
</div>

<div class="panel panel-default">
  <div class="panel-heading"><h2>Quick* Dataverse Stats Summary</h2></div>
  <div class="panel-body">
      <div class="row">
          <div class="col-xs-12">

              <h4>See the example</h4>
              <a href="https://services.dataverse.harvard.edu/miniverse/datafile/table-preview-html/2510050&version=1.3" target="_blank">https://services.dataverse.harvard.edu/miniverse/datafile/table-preview-html/2510050&version=1.3</a>
              <h4>Try it</h4>
              <ol>

              <li>Drag this link to your tool bar:  <a href="javascript:var myParam = location.search.split('fileId=')[1];window.location = 'https://services.dataverse.harvard.edu/miniverse/datafile/table-preview-html/' + myParam;">scriptlet preview tabular rows</a></li>
              <li>Go to the published file page of a tabular file. example: <a href="https://dataverse.harvard.edu/file.xhtml?fileId=2510052&version=1.3">https://dataverse.harvard.edu/file.xhtml?fileId=2510052&version=1.3</a> </li>
              <li>Click the link in the toolbar</li>
              </ol>
              * (no promises)
          </div>
      </div>
  </div>
</div>
{% endblock %}
